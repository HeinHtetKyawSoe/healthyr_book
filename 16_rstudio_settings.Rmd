# RStudio settings, good practise {#install}
\index{RStudio@\textbf{RStudio}}


## Installation
\index{RStudio@\textbf{RStudio}!installation}

### R
\index{RStudio@\textbf{RStudio}!base R}

Download and install the latest version of R from:

https://www.stats.bris.ac.uk/R/

*Windows*: `Download R for Windows` - `base` - `Download R 3.6.0 for Windows`

*Mac*: `Download R for (Mac) OS X` - `R-3.6.0.pkg`

### RStudio

Then download and install RStudio:

https://www.rstudio.com/products/rstudio/download/#download

*Windows*: `RStudio 1.2.1335 - Windows 7+`

*Mac*: `RStudio 1.2.1335 - Mac OS X 10.12+ (64-bit)`

### R packages
\index{RStudio@\textbf{RStudio}!R packages}

Open RStudio and copy-paste the lines below into the Console and press Enter:

```{r, eval = FALSE}
healthyr_packages = c("tidyverse", "boot", "finalfit", "flexdashboard", "gapminder", "here", "kableExtra", "knitr", "remotes", "rmarkdown", "shiny", "survminer", "tinytex")
install.packages(healthyr_packages)

```

**Then Restart R** before running the next two lines (same as before, copy-paste to the Console):

```{r, eval = FALSE}

remotes::install_github("thomasp85/patchwork")
tinytex::install_tinytex()

```

If it asks you "Do you want to restart your R session", press **Yes** the first time. If it immediately asks again, press **No**.

Code to check tinyTex and Tex working as expected:

```{r, eval = FALSE}

tinytex:::is_tinytex()

#  If installed should return `TRUE`.
# Notice the triple colon, this is because it's an internal variable name.

```

### Troubleshooting 3.3
<!-- Definitely want to make this version specific? -->
\index{RStudio@\textbf{RStudio}!Troubleshooting}

1. ~"can't find remotes": try doing step 3.2 (restart) again.
We only just installed `remotes::` in *3.1* so RStudio needs a restart before we can start using it.

2. ~"TeX failed, you already have a TeX distribution...". 
If you already have LaTex installed on your computer, the `tinytex::install_tinytex()` one is not necessary and might not work.  This is fine, there is no harm in copy-pasting in anyway if you are not sure.


## Starting with a blank canvas

It's good practice to restart R before commencing new work.
This is to avoid accidentally using the wrong data or functions stored in the environment.  
Restarting R only takes a second!

* Restart R (Ctrl+Shift+F10 or select it from Session -> Restart R).

RStudio has a default setting that is no longer considered best practice. You should do this once:

* Go to Tools -> Global Options -> General and set "Save .RData on exit" to Never. 
This does not mean you can't or shouldn't save your work in .RData files. 
But it is best to do it consciously and load exactly what you need to load, rather than letting R always save and load everything for you, as this could also include broken data or objects.

## Script vs Console
\index{RStudio@\textbf{RStudio}!script}
\index{RStudio@\textbf{RStudio}!console}

We don't usually don't copy or type code directly into the Console. 
We will only be using the Console for viewing output, warnings, and errors. 
All code should be in a script and executed (=run) using Ctrl+Enter (line or section) or Ctrl+Shift+Enter (whole script). 
